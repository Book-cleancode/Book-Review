# 5장. 형식 맞추기
팀 내 규칙에 따라 코드 형식을 맞춰 짜야한다.  
<br/>

## 형식을 맞추는 목적  
코드 형식은 의사소통의 일환이다.  
코드의 가독성은 앞으로 바뀔 코드의 품질에 큰 영향을 미친다.  
맨 처음 잡아놓은 구현 스타일과 가독성 수준은 유지보수 용이성과 확장성에 계속 영향을 미친다.  
<br/>

## 적절한 행 길이를 유지하라
길지 않은 적절한 크기의 파일로도 커다란 시스템을 구축할 수 있다.  
일반적으로 큰 파일보다 작은 파일이 이해하기 쉽다.  
<br/>

* 신문 기사처럼 작성하라  
  이름은 간단하면서도 설명이 가능하게 짓는다.  
  첫 부분은 고차원 개념과 알고리즘을 설명하고,  
  아래로 내려갈수록 의도를 세세하게 묘사하고,  
  마지막에는 가장 저차원 함수와 세부 내역이 나온다.  
  신문기사는 대다수 짧고, 한면을 채우는 기사는 거의 없다.  
<br/>

* 개념은 빈 행으로 분리하라  
  생각 사이는 빈 행을 넣어 분리해야 한다.  
  패키지 선언부, import 문, 각 함수 사이에 빈 행이 들어간다.  
  => 빈 행은 새로운 개념을 시작한다는 시각적 단서다.  
  => 줄바꿈은 개념을 분리한다. 가독성을 높여준다.  
<br/>

* 세로 밀집도  
  세로 밀집도는 연관성을 의미한다.  
  즉, 서로 밀접한 코드 행은 세로로 가까이 놓여야 한다.  
<br/>

* 수직 거리  
  서로 밀접한 개념은 세로로 가까이 둬야 한다.  
  서로 밀접한 개념은 한 파일에 속해야 한다.  
  (protected 변수를 피해야 하는 이유 중 하나)  
  _연관성이란?_ 한 개념을 이해하는데 다른 개념이 중요한 정도  
  1) 변수 선언  
     사용하는 위치에 최대한 가까이 선언  
     - 지역 변수는 각 함수 맨 처음에 선언  
     - 루프를 제어하는 변수는 루프문 내부에 선언
     - 드물게 다소 긴 함수에서 블록 상단이나 루프 직전에 변수를 선언하는 사례도 있음  
  2) 인스턴스 변수  
     변수 간에 세로로 거리를 두지 않음  
     - C++ : 클래스 마지막에 선언 (가위 규칙)  
     - Java : 클래스 맨 처음에 선언  
     => 언어별로 잘 알려진 위치에 인스턴스 변수를 모은다.  
  3) 종속 함수  
     한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가까이 배치한다.  
     가능하다면 호출하는 함수가 호출되는 함수보다 먼저 배치한다.  
  4) 개념적 유사성  
     친화도가 높을수록 코드를 가까이 배치한다.  
    ```java
    public class Assert {
        static public void assertTrue(String message, boolean condition) {
            if (!condition)
                fail(message);
        }

        static public void assertTrue(boolean condition) {
            assertTrue(null, condition);
        }

        static public void assertFalse(String message, boolean condition) {
            assertTrue(messsage, !condition);
        }

        static public void assertFalse(boolean condition) {
            assertTrue(null, condition);
        }
    }
    ```  
    => 명명법이 똑같고, 기본 기능이 유사하고 간단하다.  
<br/>

* 세로 순서  
  호출되는 함수를 호출하는 함수보다 나중에 배치한다.  
  자연스럽게 고차원에서 저차원으로 내려간다.  
  (예외) 파스칼, C, C++에서 함수를 호출하려면 먼저 정의해야함.  
<br/>

## 가로 형식 맞추기  
짧은 행이 바람직하다. (최대 100자 ~ 120자가 적당)  
* 가로 공백과 밀집도  
  공백을 사용해 밀접한 개념과 느슨한 개념을 표현함.  
  ```java
    private void measureLine(String line) {
        lineCount++;
        int lineSize = line.length();
        totalChars += lineSize;
        lineWidthHistogram.addLine(lineSize, lineCount);
        recordWidestLine(lineSize);
    }
  ```  
  - 할당문은 왼쪽 요소와 오른쪽 요소가 분명히 나뉨으로 할당연산자 앞뒤에 공백을 줌  
  - 함수와 인수는 서로 밀접하기 때문에 함수 이름과 괄호 사이에는 공백을 넣지 않음  
  - 함수 괄호 안 인수는 서로 별개 임으로 공백으로 분리함  
  <br/>

  연산자 우선순위를 강조하기 위해서도 공백 사용  
  ```java
    return (-b + Math.sqrt(determinant)) / (2*a);
    return b*b - 4*a*c;
  ```  
  - 곱셈 우선순위가 높기 때문에 승수 사이 공백 없음  
  - 덧셈과 뺄셈은 우선순위가 곱셈보다 낮기 때문에 항 사이에 공백이 들어감  
<br/>

* 가로 정렬  
  선언문과 할당문은 따로 정렬하지 않는 것이 좋다.  
  정렬하게 되면 변수 이름과 오른쪽 피연산자가 강조되어 진짜 의도가 가려짐.  
<br/>

* 들여쓰기  
  범위로 이뤄진 계층을 표현하기 위해 코드를 들여쓴다.  
  클래스 정의  
  &nbsp;&nbsp;ㄴ 클래스 내 메서드 선언  
  &nbsp;&nbsp;&nbsp;&nbsp;ㄴ 메서드 코드  
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ㄴ 블록 코드(블록을 포함하는 코드보다 한 수준 들여쓴다)  
<br/>

* 가짜 범위  
  빈 while 문이나 for 문  
  ```java
    while (dis.read(buf, 0, readBufferSize) != -1)
    ;
  ```  
  -> 빈 블록을 올바로 들여쓰고 괄호로 감싼다.  
  -> 세미콜론은 새 행에다 제대로 들여써서 넣어준다.  
  <br/>

## 팀 규칙  
팀 내 합의된 하나의 규칙을 따라야 한다.